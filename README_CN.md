# MFCS-Bench

**MFCS-Bench** æ˜¯ä¸€ä¸ªåŸºäº [MFCS (æ¨¡å‹å‡½æ•°è°ƒç”¨æ ‡å‡†)](https://github.com/mfcsorg/mfcs) åè®®çš„å¤§è¯­è¨€æ¨¡å‹å‡½æ•°è°ƒç”¨èƒ½åŠ›è¯„æµ‹ç³»ç»Ÿã€‚å®ƒæ ‡å‡†åŒ–äº†å¯¹ä¸åŒæ¨¡å‹å¤„ç†ç»“æ„åŒ–å‡½æ•°è°ƒç”¨çš„è¯„ä¼°æ–¹æ³•ï¼Œæœ‰åŠ©äºæ„å»ºæ›´åŠ å¥å£®çš„å·¥å…·ä½¿ç”¨å‹ LLM ç”Ÿæ€ç³»ç»Ÿã€‚

[English](README.md)

---

## ğŸš€ ç‰¹æ€§

- âœ… **MFCS åè®®å…¼å®¹**ï¼šç»Ÿä¸€çš„è·¨æ¨¡å‹å‡½æ•°è°ƒç”¨è¯„ä¼°æ¥å£
- ğŸ“Š **å…¨é¢çš„è¯„ä¼°æŒ‡æ ‡**ï¼šå·¥å…·ä½¿ç”¨ç‡ã€è¯­ä¹‰åŒ¹é…ç‡ã€å‡†ç¡®ç‡å’Œå“åº”æ—¶é—´
- ğŸ”„ **æµå¼è¾“å‡ºæ”¯æŒ**ï¼šå®æ—¶çš„å“åº”åˆ†æå’Œæµå¼è¾“å‡º
- ğŸ“ˆ **è¯¦ç»†æŠ¥å‘Š**ï¼šåŒ…å«æµ‹è¯•åˆ†æçš„æ±‡æ€»å’Œè¯¦ç»† Markdown æŠ¥å‘Š
- ğŸ” **è‡ªåŠ¨åŒ–æµç¨‹**ï¼šå®Œå…¨è‡ªåŠ¨åŒ–çš„åŸºå‡†æµ‹è¯•å·¥ä½œæµ
- âš¡ **å¼‚æ­¥å¹¶å‘è¯„æµ‹**ï¼šæ”¯æŒæ‰€æœ‰æ¨¡å‹å’Œç”¨ä¾‹çš„å¼‚æ­¥å¹¶å‘è¯„æµ‹ï¼Œæå¤§æå‡è¯„æµ‹æ•ˆç‡
- ğŸ“ **å¼‚æ­¥æŠ¥å‘Šç”Ÿæˆ**ï¼šè¯„æµ‹æŠ¥å‘Šå¼‚æ­¥ç”Ÿæˆï¼Œé€‚åˆå¤§è§„æ¨¡è¯„æµ‹
- ğŸ“¥ **å¼‚æ­¥é…ç½®ä¸ç”¨ä¾‹åŠ è½½**ï¼šé…ç½®å’Œæµ‹è¯•ç”¨ä¾‹æ”¯æŒå¼‚æ­¥IOï¼Œæ•´ä½“æ›´æµç•…
- ğŸ“š **è‡ªå®šä¹‰Embeddingæ¨¡å‹æ”¯æŒ**ï¼šæ”¯æŒè‡ªå®šä¹‰embeddingæ¨¡å‹ç”¨äºè¯­ä¹‰è¯„æµ‹åŠç›¸ä¼¼åº¦é˜ˆå€¼é…ç½®

---

## ğŸ“¦ å®‰è£…ä¸ä¾èµ–

```bash
git clone https://github.com/mfcsorg/mfcs-bench.git
cd mfcs-bench
pip install -e .
pip install -r requirements.txt
# Python ç¤ºä¾‹ï¼š
pip install -r apps/mfcs-python/requirements.txt
```

- Python 3.8+
- å¿…éœ€ï¼š`aiofiles`
- Python ç¤ºä¾‹éœ€ï¼š`mfcs`ã€`openai`

---

## ğŸ”§ å¿«é€Ÿå¼€å§‹

1. åœ¨ `test_cases/` ç›®å½•ä¸­é…ç½®æµ‹è¯•ç”¨ä¾‹
2. åœ¨ `apps/config.json` é…ç½®åº”ç”¨
3. åœ¨ `models/config.json` é…ç½®æ¨¡å‹
4. åœ¨ `tools/config.json` é…ç½®å·¥å…·
5. è¿è¡ŒåŸºå‡†æµ‹è¯•ï¼š

```bash
python run_benchmark.py
```

è¯„æµ‹ç»“æœä¼šè‡ªåŠ¨ä¿å­˜åœ¨ `reports/` ç›®å½•ï¼Œæ–‡ä»¶åå¸¦æœ‰æ—¶é—´æˆ³ï¼š
- `report_YYYYMMDD_HHMMSS.md`ï¼šè¯„æµ‹æŠ¥å‘Šï¼ˆåŒ…å«æ±‡æ€»ä¸è¯¦ç»†åˆ†æï¼‰

å¦‚éœ€æ›´å¤šå‚æ•°å’Œç”¨æ³•ï¼Œè§ä¸‹æ–¹"å‘½ä»¤è¡Œç”¨æ³•"ç« èŠ‚ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
mfcs-bench/
â”œâ”€â”€ apps/              # åº”ç”¨é…ç½®ä¸ç¤ºä¾‹
â”‚   â”œâ”€â”€ config.json    # ä¸»é…ç½®
â”‚   â”œâ”€â”€ mfcs-python/   # Python ç¤ºä¾‹
â”‚   â””â”€â”€ mfcs-js/       # JS ç¤ºä¾‹
â”œâ”€â”€ models/            # æ¨¡å‹é…ç½®
â”œâ”€â”€ tools/             # å·¥å…·é…ç½®
â”œâ”€â”€ reports/           # è¯„æµ‹æŠ¥å‘Š
â”œâ”€â”€ src/               # æ ¸å¿ƒå®ç°
â”‚   â””â”€â”€ mfcs_bench/
â”‚       â””â”€â”€ core/
â”œâ”€â”€ test_cases/        # æµ‹è¯•ç”¨ä¾‹
â””â”€â”€ run_benchmark.py   # ä¸»å…¥å£
```

---

## ğŸ“Š è¯„æµ‹æŒ‡æ ‡

| æŒ‡æ ‡                | è¯´æ˜                                      |
|---------------------|--------------------------------------------|
| å·¥å…·ä½¿ç”¨ç‡          | å›ç­”ä¸­æ­£ç¡®è°ƒç”¨å·¥å…·çš„æ¯”ä¾‹                   |
| è¯­ä¹‰åŒ¹é…ç‡          | è¯­ä¹‰å†…å®¹åŒ¹é…çš„å‡†ç¡®ç‡                       |
| å“åº”æ—¶é—´            | ç”Ÿæˆå›ç­”çš„å¹³å‡è€—æ—¶                         |
| Token ä½¿ç”¨é‡        | prompt å’Œ completion çš„ token æ¶ˆè€—         |
| æˆåŠŸç‡              | æµ‹è¯•ç”¨ä¾‹æ•´ä½“é€šè¿‡ç‡                         |
| Jaccard ç›¸ä¼¼åº¦      | è¡¡é‡é¢„æµ‹ç»“æœä¸æœŸæœ›ç»“æœé›†åˆçš„é‡å ç¨‹åº¦        |
| Embedding è¯­ä¹‰åŒ¹é…  | ä½¿ç”¨ embedding æ¨¡å‹è®¡ç®—è¯­ä¹‰ç›¸ä¼¼åº¦           |

> æ³¨æ„ï¼šJaccard ç›¸ä¼¼åº¦å’ŒåŸºäº Embedding çš„è¯­ä¹‰åŒ¹é…ä¸ºäºŒé€‰ä¸€æŒ‡æ ‡ï¼Œå®é™…è¯„æµ‹æ—¶ä»…ä¼šæ ¹æ®é…ç½®ä½¿ç”¨å…¶ä¸­ä¸€ç§ã€‚

---

## ğŸ” æµ‹è¯•ç”¨ä¾‹æ ¼å¼

æµ‹è¯•ç”¨ä¾‹ä»¥ JSON æ ¼å¼å®šä¹‰ï¼š

```json
{
    "input": {
        "user": "ç¤ºä¾‹é—®é¢˜"
    },
    "expected_output": {
        "semantic_match": "æœŸæœ›å›å¤",
        "contains_tool": "get_weather"
    },
    "description": "ç”¨ä¾‹æè¿°"
}
```

---

## ğŸ“¢ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼

- æ–°å¢æµ‹è¯•ç”¨ä¾‹
- æ”¹è¿›è¯„æµ‹æŒ‡æ ‡
- ä¼˜åŒ–æŠ¥å‘Šç”Ÿæˆ
- æ”¯æŒæ›´å¤š LLM å®ç°

---

## ğŸ“œ è®¸å¯è¯

MIT License

---

## âš™ï¸ é…ç½®è¯´æ˜

- `apps/config.json`ï¼šåº”ç”¨ä¸å‚æ•°é…ç½®
- `models/config.json`ï¼šæ¨¡å‹åˆ—è¡¨ä¸APIä¿¡æ¯
- `tools/config.json`ï¼šå·¥å…·å®šä¹‰

### apps/config.json ç¤ºä¾‹
```json
{
  "mfcs-python": {
    "command": "python",
    "stream": true,
    "args": [
      "apps/mfcs-python/mfcs-python.py",
      "--model=./models/config.json",
      "--tools=./tools/config.json",
      "--test_cases=./test_cases"
    ]
  }
}
```

### models/config.json ç¤ºä¾‹
```json
{
  "gpt-4.1-mini": {
    "name": "GPT-4.1 mini",
    "api_base": "https://...",
    "api_key": "sk-..."
  }
}
```

### tools/config.json ç¤ºä¾‹
```json
[
  {
    "type": "function",
    "function": {
      "name": "web_search_service_xxx",
      "description": "ä¸ºè§†éšœç”¨æˆ·æä¾›Webæœç´¢æœåŠ¡",
      "parameters": {"type": "object", "properties": {"content": {"type": "string"}}, "required": ["content"]}
    }
  }
]
```

---

## ğŸƒ å‘½ä»¤è¡Œç”¨æ³•

### åŸºå‡†æµ‹è¯•ä¸»ç¨‹åº
```bash
python run_benchmark.py
```

**æ”¯æŒçš„å…³é”®å‚æ•°ï¼š**

- `--config`ï¼šé…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ï¼š`apps/config.json`ï¼‰
- `--reports-dir`ï¼šæŠ¥å‘Šè¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼š`reports`ï¼‰
- `--embedding-model`ï¼šembeddingæ¨¡å‹åç§°æˆ–è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤å†…ç½®ï¼‰
- `--embedding-threshold`ï¼šembeddingç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆå¯é€‰ï¼Œé»˜è®¤0.45ï¼‰
- `--verbose` æˆ– `-v`ï¼šæ˜¾ç¤ºè¯¦ç»†æ—¥å¿—

**ç¤ºä¾‹ï¼š**
```bash
python run_benchmark.py --config=apps/config.json --reports-dir=reports --embedding-model=paraphrase-multilingual-MiniLM-L12-v2 --embedding-threshold=0.45 -v
```

### Python ç¤ºä¾‹
```bash
python apps/mfcs-python/mfcs-python.py --model=models/config.json --model_name=<æ¨¡å‹ID> --tools=tools/config.json --test_cases=test_cases --test_case_name=<ç”¨ä¾‹æ–‡ä»¶>
```

å‚æ•°è¯´æ˜ï¼š
- `--model`ï¼šæ¨¡å‹é…ç½®è·¯å¾„
- `--model_name`ï¼šæ¨¡å‹ID
- `--tools`ï¼šå·¥å…·é…ç½®è·¯å¾„
- `--tools_index`ï¼šï¼ˆå¯é€‰ï¼‰å·¥å…·ç´¢å¼•
- `--test_cases`ï¼šæµ‹è¯•ç”¨ä¾‹ç›®å½•
- `--test_case_name`ï¼šæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶

---

## ğŸ“Š è¯„æµ‹ä¸æŠ¥å‘Š

- æ”¯æŒå¼‚æ­¥å¹¶å‘è¯„æµ‹æ‰€æœ‰æ¨¡å‹å’Œç”¨ä¾‹
- æŠ¥å‘ŠåŒ…å«ï¼šæ¨¡å‹ã€ç”¨ä¾‹ã€å‡†ç¡®ç‡ã€å“åº”æ—¶é—´ã€å·¥å…·ä½¿ç”¨ç­‰è¯¦ç»†ä¿¡æ¯
- Markdown æŠ¥å‘Šä»¥æ—¶é—´æˆ³å‘½åä¿å­˜åœ¨ `reports/` ç›®å½•
- ä¸»è¦æŠ¥å‘Šæ–‡ä»¶ï¼š
  - `report_YYYYMMDD_HHMMSS.md`ï¼šå”¯ä¸€æŠ¥å‘Šæ–‡ä»¶ï¼ŒåŒ…å«æ±‡æ€»ä¸è¯¦ç»†åˆ†æ